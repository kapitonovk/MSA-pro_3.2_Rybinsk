# Проект 3.2. Веб-картография

Состав команды: Данилов Даниил, Капитонов Кирилл

Ссылка на карту: [https://kapitonovk.github.io/MSA-pro\_3.2\_Rybinsk/](https://kapitonovk.github.io/MSA-pro_3.2_Rybinsk/)

Ссылка на репозиторий: [https://github.com/kapitonovk/MSA-pro\_3.2\_Rybinsk.git](https://github.com/kapitonovk/MSA-pro_3.2_Rybinsk.git)

# Рыбинск

Рыбинск — город в Ярославской области, второй по величине город региона. Население — 177 тысяч человек. Основан в 1071 году, что делает его на 76 лет старше Москвы и всего на 61 год моложе Ярославля. Интересен своим дизайн-кодом; давней историей, связанной с торговым освоением реки Волги; и расположением по соседству с Рыбинским водохранилищем — огромным водным объектом, размерами напоминающим море.

Мы выбрали этот город, потому что считаем, что в нем есть много интересного для туриста, и это интересное проявляется с различных сторон. Во-первых, Рыбинск — город в богатой историей, здесь можно найти большое количество старинных зданий, являющихся объектами культурного наследия. Во-вторых, Рыбинск стоит на великой русской реке — Волге, а еще рядом находится Рыбинское водохранилище. Стало быть, здесь можно увидеть Волгу и даже искупаться. В-третьих, Рыбинск — один из первых (или первый) немногочисленных городов России, где в центре есть свой дизайн-код, обращающийся к историческому наследию центральных улиц.

Поэтому наша карта транслирует несколько положений, отраженных в слоях:

1. В Рыбинске прикольный дизайн-код, и мы показываем это через 
 
- Линейный слой улиц, на которых он действует, кликабельный  
- Ареал, где используется этот дизайн-код  

2. В Рыбинске много ОКН, которые могут рассказать нам об истории города и окунуть нас в замечательную атмосферу старого города на Волге, поэтому мы показываем  

- Точки ОКН; по клику можно узнать, как называется объект, его адрес и датировку  
- Плотность точек с ОКН, агрегированную на сетке  

3. Под Рыбинском есть пляжи, до некоторых из них можно добраться на автобусе. Поэтому мы показываем:  

- Сами пляжи  
- Остановки, от которых реально добраться, пройдя не более 1,5 км  
- Маршруты автобусов, на которых можно добраться до некоторых пляжей. По клику можно узнать, до каких пляжей можно доехать, пройдя не более 1,5 км  

4. В Рыбинске есть туристическая инфраструктура: есть где поесть, переночевать, есть музеи и сувенирные магазины  

- Мы показываем точечный слой POI  
- И показываем тепловую карту, чтобы понять, где инфраструктуры больше

# Используемые данные

**POI** — точечный слой коммерческих точек, адреса собраны с яндекс.карт путем скрейпинга. Далее загеокодированы.

**Автобусные маршруты** — собраны с OpenStreetMap (через OverpassTurbo) и скорректированы “руками” в Qgis.

**Автобусные остановки** — как и POI, соскрейплены с Яндекс.карт.

**Улицы Рыбинска, для которых принят дизайн-код** — взяты с OpenStreeMap на основе [соответствующего постановления](https://base.garant.ru/45938290/53f89421bbdaf741eb2d1ecc4ddb4c33/).

**Пляжи** — полигоны, взяты с OpenStreetMap.

**Объекты культурного наследия** — загеокодированы (плагин Awesome Tables) на основе данных из [этого портала.](https://ru.wikivoyage.org/wiki/Культурное_наследие_России/Ярославская_область/Рыбинск)

# Основные методы

При создании веб\-карты мы использовали ряд приемов разной сложности.

**Первое**: мы агрегировали данные. Например, по построенным буферам от остановок узнали, до каких пляжей можно добраться на автобусе, “джоинили” эти данные к остановкам и маршрутам. Также мы построили сетку и посчитали плотность распределения объектов культурного наследия по этой сетке.

**Второе**: мы использовали кластеризацию точек. POI и точки ОКН кластеризуются в зависимости от масштаба.

**Третье**: мы добавили тепловую карту. Она позволяет понять зоны высокой концентрации туристически POI. 

**Четвертое**: построили ареал улиц, на которых используется дизайн-код.

# Сложности

Возможно, одной из главных сложностей было разобраться в извлечении геометрических сущностей и переложении их на карту. Поначалу приходилось очень много обращаться к ЧатГПТ, пытаясь понять, как сделать самую простую вещь. Но постепенно сущности Фолиума и ГеоПандаса стали знакомыми, и дальше проще стало пользоваться документацией.

# Гордости

Гордимся тем, что для многих слоев мы реализовали всплывающие плашки с полезной информацией, которая что-то значит. Придумали, как “подружить” транспортный каркас Рыбинска и пригородов с реальными данными пляжей, сделав этот слой осознанно полезным. И в целом все выглядит если и не супер-красиво с точки зрения колористики или прочего, при этом сделано полностью осознанно: все аккуратненько разведено, сгруппировано и покрашено.

# Неудачи

Как таковых неудач не было, получилось сделать всё. Пожалуй, бесит, что достаточно сложно дизайнить внутри кода и очень сложно сделать красивое наложение слоев друг на друга. В итоге мы решили, что адекватнее выключить по умолчанию часть слоев. Все вместе смотрится шумно.

# ЧатГПТ

ЧатГПТ мы использовали достаточно активно. По началу даже скорее для того, чтобы разобраться в основных сущностях Фолиума, понять, как одно дружит с другим и тд. 

Еще он очень помог довести внешний вид карты до более приличного вида за счет внедрения кусочков кода с Яваскриптами, потому что мы ими не владеем. Таким образом получилось внедрить нормальные нотации ХТМЛ в код и сделать покрасивее.

Но есть и за что поругать: до проблемы со словарем цветов, который мы используем для покраски градиентом тепловой карты, дошел человеческий мозг. Машина так и не поняла проблемы, несмотря на большое количество уточнений и объяснений, что же не так.

# Итог

Задание очень понравилось, творческий полет мысли втянул в него с головой, возможно, даже в ущерб другим занятиям :) Кодить карты очень приятно и интересно. Богатство библиотек и готовых решений позволяет достаточно быстро собрать и задеплоить интерактивную карту, которая прилично выглядит и что-то умеет. 